/* Smintheia Nook – estilos principales */
:root{
  --bg:#f3f4f8; --surface:#ffffff; --ink:#12131a; --muted:#6b6f76; --primary:#6e38ff; --primary-ink:#fff;
  --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --info:#3b82f6;
  --radius:18px; --radius-sm:12px; --shadow:0 10px 30px rgba(10,10,20,.08);
  --chip:#f0f1f5; --chip-b:#e6e7ee;
}

/* Dark mode */
:root.dark{
  --bg:#0d0f15; --surface:#141824; --ink:#e6e6ee; --muted:#a2a6b3; --primary:#7b5cff; --primary-ink:#fff;
  --chip:#202536; --chip-b:#1a1f2e; --shadow:0 12px 40px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font-family:"Spline Sans",system-ui,Segoe UI,Roboto,Arial,sans-serif;display:flex;flex-direction:column;min-height:100vh;transition:background .25s,color .25s}
img{max-width:100%;display:block}
a{color:var(--primary);text-decoration:none}
a:hover{text-decoration:underline}

.container{max-width:1200px;margin:auto;padding:0 16px}
.section{margin:38px 0}
.section-title{font-family:"Spline Sans Mono",monospace;font-weight:700;letter-spacing:.4px;margin:0 0 12px}
.sub{color:var(--muted)}
.hidden{display:none!important}

/* Header */
header.top{position:sticky;top:0;z-index:60;background:linear-gradient(180deg,#0d0b12,#111018);border-bottom:1px solid rgba(255,255,255,.08)}
.nav{display:grid;grid-template-columns:1fr auto 1fr;gap:14px;align-items:center;padding:10px 16px}
.brand{display:flex;gap:10px;align-items:center;color:#fff;font-weight:800;font-family:"Spline Sans Mono",monospace}
.brand img{width:32px;height:32px;object-fit:contain}
.searchbar{display:flex;gap:8px;align-items:center;background:#f5f6fa;border-radius:999px;padding:6px 10px}
:root.dark .searchbar{background:#1d2231}
.searchbar input{all:unset;width:220px}
.actions{display:flex;gap:8px;justify-content:flex-end;align-items:center}
.btn{appearance:none;border:1px solid rgba(0,0,0,.12);border-radius:999px;padding:10px 14px;background:var(--surface);color:var(--ink);font-weight:700;cursor:pointer;transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn.purple{background:var(--primary);border-color:transparent;color:var(--primary-ink)}
.btn.ghost{background:transparent;border:1px dashed rgba(0,0,0,.18)}
.btnInfoCreador{background:linear-gradient(135deg,var(--primary),#9b5cff)!important;border-color:transparent!important;color:#fff!important;font-weight:900!important}
.cta-creator{box-shadow:0 10px 30px rgba(110,56,255,.45)!important;animation:ctaPulse 1.8s ease-in-out infinite;transform-origin:center}
@keyframes ctaPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.04)}}
.chip{padding:6px 12px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b);font-size:13px;color:var(--ink)}
.chip.active {
  background: var(--primary);
  color: var(--primary-ink);
  border-color: var(--primary);
  box-shadow: 0 2px 8px rgba(110,56,255,0.10);
  font-weight: 700;
  transition: background 0.2s, color 0.2s, border-color 0.2s;
}
.coin{display:inline-flex;align-items:center;gap:6px;background:var(--surface);border:1px solid rgba(0,0,0,.08);padding:6px 10px;border-radius:999px;font-weight:700}
.avatar{display:inline-flex;align-items:center;gap:8px;background:var(--surface);border:1px solid rgba(0,0,0,.08);padding:6px 10px;border-radius:999px;cursor:pointer}
.dot{width:22px;height:22px;border-radius:50%;background:var(--primary)}
.avatar img{width:24px;height:24px;border-radius:50%;object-fit:cover;border:2px solid var(--primary)}
.menu{position:relative}
.menu-panel{position:absolute;right:0;top:42px;background:var(--surface);border:1px solid rgba(0,0,0,.08);box-shadow:var(--shadow);border-radius:12px;min-width:240px;display:none}
.menu-panel.open{display:block}
.menu-panel a{display:block;padding:10px 12px;color:var(--ink);text-decoration:none}
.menu-panel a:hover{background:rgba(0,0,0,.05)}
.catmenu{position:relative}
.cat-group{display:grid;grid-template-columns:140px 1fr;gap:10px;align-items:start;padding:8px 6px}
.cat-group h5{margin:6px 0;font-size:13px;color:var(--muted)}
/* Botón de categorías en header */
#catBtn{background:#000!important;color:#fff!important;border-color:#000!important}
#catBtn:hover{background:#1a1a1a!important;transform:translateY(-1px)}
/* Menú de categorías horizontal mejorado */
#topCats{display:flex;flex-wrap:wrap;gap:8px;padding:12px}
.cat-main-btn{appearance:none;background:var(--primary);color:#fff;border:none;padding:10px 16px;border-radius:999px;font-weight:700;cursor:pointer;transition:.2s;font-size:14px}
.cat-main-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(110,56,255,.3)}
.cat-submenu{grid-column:1/-1;display:flex;flex-wrap:wrap;gap:6px;padding:8px 12px;background:var(--chip);border-radius:12px;margin-top:4px;animation:slideDown .2s ease-out}
@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}

/* Hero */
.hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center}
.hero-card{background:var(--surface);border-radius:var(--radius);padding:26px;box-shadow:var(--shadow)}
.hero h1{font-size:44px;line-height:1.1;margin:0 0 10px}
.hero p{color:var(--muted);max-width:60ch}
.illo img{width:100%;border-radius:22px}
@media (max-width:900px){.hero{grid-template-columns:1fr}}

/* Carousel */
.carousel{position:relative}
.carousel-track{display:flex;gap:16px;overflow:auto;padding:0 4px 8px;scroll-snap-type:x mandatory;scroll-behavior:smooth}
.carousel-track > *{scroll-snap-align:start}
.carousel-controls{display:none}
.carousel-btn{display:none}
.carousel-dots{display:flex;gap:6px;justify-content:center;margin-top:6px}
.dot-i{width:8px;height:8px;border-radius:999px;background:#c9cbd6}
.dot-i.active{background:var(--primary)}
/* mayor tamaño para ítems del carrusel */
.carousel-track .card-book{min-width:220px}

/* Cards */
.card-book,.tile{background:var(--surface);border-radius:16px;box-shadow:var(--shadow);padding:12px;display:flex;flex-direction:column}
.card-book .cover,.tile .cover{border-radius:12px;background:#cfd3df;display:grid;place-items:center;overflow:hidden;aspect-ratio:2/3;height:auto}
.card-book .cover img,.tile .cover img{width:100%;height:100%;object-fit:cover;display:block}
/* altura controlada por relación de aspecto */
.tile .cover{height:auto}
.meta{margin-top:10px}
.meta .title{font-weight:800}
.meta .author{font-size:13px;color:var(--muted)}
.statbar{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:12px;margin-top:6px;flex-wrap:wrap}
.statbar .sp{display:inline-flex;gap:6px;align-items:center}
.badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}

/* Grids */
.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:16px}
@media (max-width:1100px){.grid{grid-template-columns:repeat(4,1fr)}}
@media (max-width:800px){.grid{grid-template-columns:repeat(2,1fr)}}

/* Reader */
.reader{background:var(--surface);border-radius:20px;box-shadow:var(--shadow);padding:30px;font-size:18px;line-height:1.8}
.reader .toolbar{display:flex;gap:10px;justify-content:space-between;align-items:center;margin-bottom:14px;border-bottom:1px dashed rgba(0,0,0,.08);padding-bottom:10px}
.lock{display:inline-flex;align-items:center;gap:8px;background:#fff0f4;border:1px solid #ffd1e1;border-radius:999px;padding:6px 10px}
.preview-locked{max-height:220px;overflow:hidden;position:relative}
.preview-locked::after{content:"";position:absolute;left:0;right:0;bottom:0;height:70px;background:linear-gradient(to bottom, rgba(255,255,255,0), var(--surface))}
:root.dark .preview-locked::after{background:linear-gradient(to bottom, rgba(13,15,21,0), var(--surface))}

/* Modal */
.modal-mask{position:fixed;inset:0;background:rgba(10,10,20,.5);display:none;align-items:center;justify-content:center;z-index:70}
.modal{width:min(600px,92vw);background:var(--surface);border-radius:22px;box-shadow:0 20px 60px rgba(10,10,20,.35);overflow:hidden}
.modal header{position:unset;background:var(--surface);border:0}
.modal .body{padding:20px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.field{display:flex;flex-direction:column;gap:6px}
.field input, .field select, .field textarea{padding:12px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.12);background:#fafafa;color:var(--ink)}
:root.dark .field input, :root.dark .field select, :root.dark .field textarea{background:#1d2231;border-color:#2f3650;color:#e6e6ee}
/* Mejor contraste en configuración */
#config .sub, #config label{color:var(--ink);font-weight:600}
#config .tile{color:var(--ink);background:var(--chip);padding:16px;border-radius:12px}
#config .section-title{color:var(--primary);font-size:18px}

/* Accordion */
.accordion{border:1px solid rgba(0,0,0,.12);border-radius:14px;overflow:hidden;background:var(--surface)}
.ac-item + .ac-item{border-top:1px solid rgba(0,0,0,.08)}
.ac-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;cursor:pointer}
.ac-body{display:none;padding:12px 14px}
.ac-item.open .ac-body{display:block}

/* Toast (más grande y centrado) */
.toast{position:fixed;left:50%;right:auto;bottom:24px;background:#121018;color:#fff;padding:18px 26px;border-radius:18px;box-shadow:0 16px 50px rgba(0,0,0,.4);opacity:0;transform:translate(-50%,10px);transition:.25s;font-weight:900;font-size:18px;z-index:80;pointer-events:none;max-width:92vw;text-align:center}
.toast.show{opacity:1;transform:translate(-50%,0)}
/* Variante de éxito con flecha grande verde */
.toast.success{background:linear-gradient(135deg,#0b1d12,#0a2a16);border:1px solid rgba(34,197,94,.4)}
.toast .giant{display:inline-flex;align-items:center;gap:14px}
.toast .giant .arrow{font-size:52px;line-height:1;color:var(--ok);filter:drop-shadow(0 4px 12px rgba(34,197,94,.5))}
.toast .giant .msg{font-size:18px}

/* Footer */
footer{background:#0d0b12;color:#d9d4e6;margin-top:auto}
.foot{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:18px;padding:30px 16px}
.foot h4{margin:0 0 8px}
.copy{border-top:1px solid rgba(255,255,255,.12);padding:12px 16px;text-align:center;font-size:12px;color:#bfb7da}

/* Density & font scale */
:root.compact .card-book, :root.compact .tile{padding:10px}
:root.fs-110{font-size:17.6px}
:root.fs-90{font-size:14.4px}

/* Animaciones y efectos */
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.hero-card{animation:fadeIn .4s ease-out}
.card-book:hover,.tile:hover{transform:translateY(-4px);box-shadow:0 14px 40px rgba(10,10,20,.15)}
.card-book,.tile{transition:transform .2s,box-shadow .2s}
.btn:active{transform:translateY(0)!important}
/* Efectos visuales adicionales */
.section-title::before{content:'';display:inline-block;width:4px;height:18px;background:var(--primary);margin-right:8px;border-radius:2px}
.tile{transition:background .2s}
.tile:hover{background:var(--chip)}

/* Modal de pago mejorado */
.payment-modal{background:rgba(10,10,20,.85)!important;backdrop-filter:blur(8px)}
.payment-modal-content{max-width:600px!important;width:95vw!important;max-height:95vh;overflow-y:auto;animation:paymentSlideIn .5s cubic-bezier(0.34, 1.56, 0.64, 1)}
@keyframes paymentSlideIn{from{opacity:0;transform:scale(0.8) translateY(-50px)}to{opacity:1;transform:scale(1) translateY(0)}}
.payment-close{position:absolute;top:20px;right:20px;background:rgba(0,0,0,.1);border:none;width:40px;height:40px;border-radius:50%;font-size:24px;cursor:pointer;transition:.2s}
.payment-close:hover{background:rgba(0,0,0,.2);transform:rotate(90deg)}
.payment-header{background:linear-gradient(135deg,var(--primary),#9b5cff);color:#fff;padding:30px 20px;text-align:center;border-radius:22px 22px 0 0}
.payment-coin-animation{display:flex;justify-content:center;gap:10px;margin-bottom:10px}
@keyframes coinBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
.payment-coin-animation .coin{font-size:36px;animation:coinBounce 1s ease-in-out infinite}
.payment-coin-animation .coin:nth-child(2){animation-delay:.2s}
.payment-coin-animation .coin:nth-child(3){animation-delay:.4s}
.payment-benefits{display:flex;gap:10px;justify-content:center;margin-top:16px;flex-wrap:wrap}
.benefit-chip{background:rgba(255,255,255,.2);padding:8px 16px;border-radius:20px;font-size:14px;font-weight:600}
.payment-secure{display:flex;align-items:center;gap:10px;background:var(--chip);padding:12px;border-radius:12px;justify-content:center;flex-wrap:wrap}
.payment-btn-primary{background:linear-gradient(135deg,var(--primary),#9b5cff)!important;color:#fff!important;font-size:18px!important;padding:16px 32px!important;width:100%;font-weight:800;border:none!important}
.payment-btn-primary:hover{transform:translateY(-2px)!important;box-shadow:0 8px 30px rgba(110,56,255,.4)}
.payment-footer{margin-top:20px;text-align:center;padding-top:20px;border-top:1px dashed rgba(0,0,0,.1)}

/* Media queries para modal de pago */
@media (max-width:768px){
  .payment-modal-content{width:98vw!important}
  .payment-header{padding:20px 15px}
  .payment-header h2{font-size:24px!important;margin:15px 0 8px!important}
  .payment-header #orderText{font-size:18px!important}
  .payment-coin-animation .coin{font-size:28px}
  .payment-benefits{gap:6px}
  .benefit-chip{padding:6px 12px;font-size:12px}
  .payment-btn-primary{font-size:16px!important;padding:14px 24px!important}
  .modal .body{padding:20px!important}
}
